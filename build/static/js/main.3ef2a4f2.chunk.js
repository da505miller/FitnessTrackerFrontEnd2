(this.webpackJsonpfitnesstrackerfrontend2=this.webpackJsonpfitnesstrackerfrontend2||[]).push([[0],{59:function(e,t,r){"use strict";r.r(t);var n=r(8),s=r(5),c=r(1),a=r(25),o=r.n(a),i=r(7),u=r(4),l=r(0),j=function(){return Object(l.jsxs)("div",{id:"title",className:"jumbotron text-center",children:[Object(l.jsx)("h1",{className:"text-info",children:"FITNESS TRACKER"}),Object(l.jsx)("h5",{className:"text-warning",children:"Developed by Derek Miller"})]})},b=r(2),p=r.n(b),h=r(3),d=r(19),f=function(){var e=Object(h.a)(p.a.mark((function e(t,r,n,s){var c,a,o,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n===s){e.next=4;break}return alert("PASSWORDS DON'T MATCH!"),e.abrupt("return");case 4:return e.next=6,fetch("http://fitnesstrac-kr.herokuapp.com/api/users/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,password:n})});case 6:return c=e.sent,e.next=9,c.json();case 9:if(a=e.sent,o=a.user,i=a.token,console.log(d.cyan("New registered user: "),o),t(i),localStorage.setItem("token",i),!a.error){e.next=17;break}throw a.error;case 17:console.log(a),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.error(d.red("Trouble registering"),e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t,r,n,s){return e.apply(this,arguments)}}(),O=function(){var e=Object(h.a)(p.a.mark((function e(t,r,n){var s,c,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://fitnesstrac-kr.herokuapp.com/api/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:r})});case 3:return s=e.sent,e.next=6,s.json();case 6:if(c=e.sent,console.log(c.token),a=c.token,n(a),localStorage.setItem("token",a),localStorage.getItem("token"),!c.error){e.next=14;break}throw c.error;case 14:console.log(c),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),console.error(d.red("Trouble logging in"),e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,r,n){return e.apply(this,arguments)}}(),m=function(){var e=Object(h.a)(p.a.mark((function e(t){var r,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://fitnesstrac-kr.herokuapp.com/api/users/me",{headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}});case 3:return r=e.sent,e.next=6,r.json();case 6:return n=e.sent,console.log(d.cyan("Logged in user data: "),n),e.abrupt("return",n);case 11:e.prev=11,e.t0=e.catch(0),console.error(d.red("Trouble fetching user data!!!"),e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(h.a)(p.a.mark((function e(){var t,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://fitnesstrac-kr.herokuapp.com/api/routines",{headers:{"Content-Type":"application/json"}});case 3:return t=e.sent,e.next=6,t.json();case 6:if(!(r=e.sent).error){e.next=9;break}throw r.error;case 9:return console.log(r),e.abrupt("return",r);case 13:e.prev=13,e.t0=e.catch(0),console.error(d.red("Trouble fetching public routines"),e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(h.a)(p.a.mark((function e(){var t,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://fitnesstrac-kr.herokuapp.com/api/activities",{headers:{"Content-Type":"application/json"}});case 3:return t=e.sent,e.next=6,t.json();case 6:if(!(r=e.sent).error){e.next=9;break}throw r.error;case 9:return console.log(r),e.abrupt("return",r);case 13:e.prev=13,e.t0=e.catch(0),console.error(d.red("Trouble fetching all activities!!!"),e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(h.a)(p.a.mark((function e(t,r){var n,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://fitnesstrac-kr.herokuapp.com/api/users/".concat(t,"/routines"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+r}});case 3:if(n=e.sent,!(s=n.json()).error){e.next=7;break}throw s.error;case 7:return console.log(s),e.abrupt("return",s);case 11:throw e.prev=11,e.t0=e.catch(0),console.error(d.red("Trouble getting user routines!!!")),e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r){return e.apply(this,arguments)}}(),k=function(){var e=Object(h.a)(p.a.mark((function e(t,r,n,s){var c,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://fitnesstrac-kr.herokuapp.com/api/routines",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t},body:JSON.stringify({name:r,goal:n,isPublic:s})});case 3:return c=e.sent,e.next=6,c.json();case 6:if(!(a=e.sent).error){e.next=9;break}throw a.error;case 9:return console.log(a),e.abrupt("return",a);case 13:throw e.prev=13,e.t0=e.catch(0),console.error(d.red("ERROR creating new routine!!!")),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,r,n,s){return e.apply(this,arguments)}}(),N=function(){var e=Object(h.a)(p.a.mark((function e(t,r){var n,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://fitnesstrac-kr.herokuapp.com/api/routines/".concat(r),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}});case 3:return n=e.sent,e.next=6,n.json();case 6:if(!(s=e.sent).error){e.next=9;break}throw s.error;case 9:return console.log(s),e.abrupt("return",s);case 13:throw e.prev=13,e.t0=e.catch(0),console.error(d.red("ERROR deleting routine!!!")),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,r){return e.apply(this,arguments)}}(),y=r(19),w=function(e){var t=e.setToken,r=e.history,n=Object(c.useState)(""),a=Object(s.a)(n,2),o=a[0],i=a[1],u=Object(c.useState)(""),j=Object(s.a)(u,2),b=j[0],d=j[1],O=Object(c.useState)(""),m=Object(s.a)(O,2),x=m[0],v=m[1];return Object(l.jsxs)("form",{onSubmit:function(){var e=Object(h.a)(p.a.mark((function e(n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,f(t,o,b,x);case 4:e.sent,r.push("/login"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(y.red("error registering user onSubmit"),e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),children:[Object(l.jsx)("h3",{children:"Register"}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{children:"Username"}),Object(l.jsx)("input",{onChange:function(e){return i(e.target.value)},type:"text",className:"form-control",placeholder:"Username",required:!0})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{children:"Password"}),Object(l.jsx)("input",{onChange:function(e){return d(e.target.value)},type:"password",className:"form-control",placeholder:"Enter password",required:!0})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{children:"Verify Password"}),Object(l.jsx)("input",{onChange:function(e){return v(e.target.value)},type:"password",className:"form-control",placeholder:"Verify password",required:!0})]}),Object(l.jsx)("button",{type:"submit",className:"btn btn-primary btn-dark btn-lg btn-block",children:"Register"})]})},S=r(19),T=function(e){var t=e.setToken,r=e.match,n=e.history,a=Object(c.useState)(""),o=Object(s.a)(a,2),u=o[0],j=o[1],b=Object(c.useState)(""),p=Object(s.a)(b,2),h=p[0],d=p[1],m=Object(c.useState)(""),x=Object(s.a)(m,2),v=x[0],g=x[1];return Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),"/register"===r.url&&f(t,u,h,v),n.push("/login"),"/login"===r.url&&(console.log(u,h,v),O(u,h,t)),n.push("/home")},children:[Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{children:"Username"}),Object(l.jsx)("input",{onChange:function(e){var t=e.target.value;return j(t)},type:"text",className:"form-control",placeholder:"Username",required:!0})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{children:"Password"}),Object(l.jsx)("input",{onChange:function(e){var t=e.target.value;return d(t)},type:"password",className:"form-control",placeholder:"Enter password",required:!0})]}),"/register"===r.url?Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{children:"Verify Password"}),Object(l.jsx)("input",{onChange:function(e){var t=e.target.value;return g(t)},type:"password",value:v,className:"form-control",placeholder:"Verify password",required:!0})]}):null,Object(l.jsx)("button",{type:"submit",className:"btn btn-primary btn-dark btn-lg btn-block",children:"Login"}),"/register"===r.url?Object(l.jsx)(i.b,{to:"login",children:" Already have an account?"}):Object(l.jsx)(i.b,{to:"register",children:" Don't have an account?"})]})},C=function(e){var t=e.token,r=e.setToken,n=e.history;return Object(l.jsx)("button",{onClick:function(e){var s=t;console.log(S.cyan("storage token is:"),s),s&&(localStorage.removeItem("token"),r(null),n.push("/login"))},type:"submit",className:"btn btn-primary btn-dark btn-lg btn-block",children:"Logout"})},R=function(){return Object(l.jsx)("p",{children:"Home"})},E=function(e){var t=e.activities,r=e.setActivities;e.token;return Object(c.useEffect)(Object(h.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:n=e.sent,r(n),console.log(t);case 5:case"end":return e.stop()}}),e)}))),[]),Object(l.jsxs)("div",{id:"post-box",className:"form-group",children:[Object(l.jsx)("h1",{className:"post-title text-center",children:"Activities"}),Object(l.jsx)("div",{id:"post",className:"container",children:t.map((function(e,t){return Object(l.jsxs)("div",{className:"containter",children:[Object(l.jsxs)("div",{className:"form-group list-group-item-info",children:["ID: ",e.id]}),Object(l.jsxs)("div",{className:"form-group bg-success",children:["Name: ",e.name]}),Object(l.jsxs)("div",{className:"form-group bg-success list-group-item-text",children:["Description: ",e.description]}),Object(l.jsx)("br",{})]},t)}))})]})},A=function(e){var t=e.routines,r=e.setRoutines;e.token;return Object(c.useEffect)(Object(h.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:n=e.sent,r(n),console.log(t);case 5:case"end":return e.stop()}}),e)}))),[]),Object(l.jsxs)("div",{id:"post-box",className:"form-group",children:[Object(l.jsx)("h1",{className:"post-title text-center",children:"Public Routines"}),Object(l.jsx)("div",{id:"post",className:"container",children:t.map((function(e,t){return Object(l.jsxs)("div",{className:"containter",children:[Object(l.jsx)("h2",{className:"list-group-item-heading",children:e.name}),Object(l.jsxs)("div",{className:"form-group list-group-item-info",children:["Created by: ",e.creatorName]}),Object(l.jsxs)("div",{className:"form-group list-group-item-info",children:["Goal: ",e.goal]}),e.activities.map((function(e){return Object(l.jsxs)("div",{className:"activity",children:[Object(l.jsxs)("h4",{className:"form-group bg-success",children:["Activities: ",e.name]}),Object(l.jsxs)("p",{children:["....Activity Description: ",e.description]}),Object(l.jsxs)("p",{children:["....Duration: ",e.duration]}),Object(l.jsxs)("p",{children:["....Count: ",e.count]})]})}))]},t)}))})]})},D=r(28),I=function(e){e.routines,e.setRoutines;var t=e.token,r=e.history,n=Object(c.useState)([]),a=Object(s.a)(n,2),o=a[0],u=a[1],j=Object(c.useState)([]),b=Object(s.a)(j,2),d=b[0],f=b[1],O=Object(c.useState)([]),x=Object(s.a)(O,2),v=x[0],k=x[1];return Object(c.useEffect)((function(){t&&m(t,f)}),[t]),Object(c.useEffect)((function(){d.username&&(g(d,u,k),console.log("user routines: ",o))}),[d]),console.log("user routines: ",o),Object(l.jsxs)("div",{id:"post-box",className:"form-group",children:[Object(l.jsx)("h1",{className:"post-title text-center",children:"Current User Routines"}),Object(l.jsx)("div",{id:"post",className:"container",children:v.map((function(e,n){return Object(l.jsxs)("div",{className:"containter",children:[Object(l.jsxs)("h2",{className:"list-group-item-heading",children:["Routine Id: ",e.id]}),Object(l.jsxs)("div",{className:"form-group list-group-item-info",children:["Creator Name: ",e.creatorName]}),Object(l.jsxs)("div",{className:"form-group list-group-item-info",children:["isPublic: ",e.isPublic]}),Object(l.jsxs)("div",{className:"form-group list-group-item-info",children:["Name: ",e.name]}),Object(l.jsxs)("div",{className:"form-group list-group-item-info",children:["Goal: ",e.goal]}),Object(l.jsx)("div",{className:"form-group",children:Object(l.jsx)("button",{onClick:function(){var e=Object(h.a)(p.a.mark((function e(n){var s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N(t,posts._id);case 3:s=e.sent,console.log(s),g(o),r.push("/routines"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("trouble deleting routine",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),type:"submit",className:"btn btn-primary",children:"Delete Post"})}),Object(l.jsx)("br",{})]},n)}))}),Object(l.jsx)(i.b,{to:"/newroutine",className:"link",children:"Create Routine"})]})},P=function(e){var t=e.token,r=e.routines,n=e.setRoutines,a=Object(c.useState)(""),o=Object(s.a)(a,2),i=o[0],j=o[1],b=Object(c.useState)(""),d=Object(s.a)(b,2),f=d[0],O=d[1],m=Object(c.useState)(!0),x=Object(s.a)(m,2),v=x[0],g=x[1],N=Object(u.e)();return Object(l.jsxs)("form",{onSubmit:function(){var e=Object(h.a)(p.a.mark((function e(s){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.preventDefault(),e.prev=1,e.next=4,k(t,i,f,v);case 4:c=e.sent,n([].concat(Object(D.a)(r),[c])),N.push("/routines"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),children:[Object(l.jsx)("h3",{children:"Make a new routine"}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{children:"Name"}),Object(l.jsx)("input",{onChange:function(e){return j(e.target.value)},type:"text",className:"form-control",placeholder:"Title",required:!0})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{children:"Goal"}),Object(l.jsx)("input",{onChange:function(e){return O(e.target.value)},type:"text",className:"form-control",placeholder:"Description",required:!0})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{children:"isPublic"}),Object(l.jsx)("input",{onChange:function(e){return g(e.target.value)},type:"text",className:"form-control",placeholder:"Description",required:!0})]}),Object(l.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",children:"Create Routine"})]})},q=function(){var e=Object(c.useState)(null),t=Object(s.a)(e,2),r=t[0],a=t[1],o=Object(c.useState)(null),b=Object(s.a)(o,2),p=(b[0],b[1],Object(c.useState)([])),h=Object(s.a)(p,2),d=h[0],f=h[1],O=Object(c.useState)([]),m=Object(s.a)(O,2),x=m[0],v=m[1],g=Object(c.useState)([]),k=Object(s.a)(g,2);k[0],k[1];return Object(c.useEffect)((function(){var e=localStorage.getItem("token");e&&a(e)}),[]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(j,{}),Object(l.jsx)("h1",{children:"Welcome to the Fitness Tracker App"}),Object(l.jsx)("br",{}),Object(l.jsxs)(i.a,{children:[Object(l.jsxs)("div",{id:"link-containter",children:[Object(l.jsx)(i.b,{to:"/home",className:"link",children:"HOME"}),r?Object(l.jsx)(i.b,{to:"/logout",className:"link",children:" LOGOUT "}):Object(l.jsx)(i.b,{to:"/login",className:"link",children:" LOGIN "}),r?null:Object(l.jsx)(i.b,{to:"/register",className:"link",children:" REGISTER "}),Object(l.jsx)(i.b,{to:"/routines",className:"link",children:" ROUTINES "}),r?Object(l.jsx)(i.b,{to:"/myroutines",className:"link",children:" MY ROUTINES "}):null,Object(l.jsx)(i.b,{to:"/activities",className:"link",children:" ACTIVITIES "})]}),Object(l.jsx)(u.a,{path:"/home",render:function(e){return Object(l.jsx)(R,{})}}),Object(l.jsx)(u.a,{path:"/login",render:function(e){return Object(l.jsx)(T,Object(n.a)(Object(n.a)({},e),{},{setToken:a}))}}),Object(l.jsx)(u.a,{path:"/logout",render:function(e){return Object(l.jsx)(C,Object(n.a)(Object(n.a)({},e),{},{token:r,setToken:a}))}}),Object(l.jsx)(u.a,{path:"/register",render:function(e){return Object(l.jsx)(w,Object(n.a)(Object(n.a)({},e),{},{setToken:a}))}}),Object(l.jsx)(u.a,{path:"/routines",render:function(e){return Object(l.jsx)(A,Object(n.a)(Object(n.a)({},e),{},{token:r,routines:d,setRoutines:f,activities:x,setActivities:v}))}}),Object(l.jsx)(u.a,{path:"/myroutines",render:function(e){return Object(l.jsx)(I,Object(n.a)(Object(n.a)({},e),{},{token:r,myRoutines:d,setMyRoutines:f,activities:x,setActivities:v}))}}),Object(l.jsx)(u.a,{path:"/newroutine",render:function(e){return Object(l.jsx)(P,Object(n.a)(Object(n.a)({},e),{},{token:r,routines:d,setRoutines:f}))}}),Object(l.jsx)(u.a,{path:"/activities",render:function(e){return Object(l.jsx)(E,Object(n.a)(Object(n.a)({},e),{},{token:r,activities:x,setActivities:v}))}})]}),r?null:Object(l.jsx)("h3",{children:"Please register or login to use the app unless you are just visiting."})]})};o.a.render(Object(l.jsx)(q,{}),document.getElementById("app"))}},[[59,1,2]]]);
//# sourceMappingURL=main.3ef2a4f2.chunk.js.map